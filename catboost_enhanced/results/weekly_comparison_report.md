# 週期模型重訓報告

生成時間: 2025-11-23 00:11:58

## 執行摘要

本週期對兩套機器學習系統進行平行重訓和性能評估:

### ML Enhanced 系統
- **架構**: 9 個獨立 XGBoost 模型 (pattern_type × exit_mode)
- **訓練方法**: 傳統監督學習，各模型獨立訓練
- **特徵數**: 24 個

### CatBoost Enhanced 系統
- **架構**: 1 個全局 CatBoost 多分類模型 (pattern_type 和 exit_mode 作為特徵)
- **訓練方法**: P0 全局模型 + P1 Embargo 隔離 + P2 樣本權重
- **特徵數**: 52 個數值 + 2 個分類

## 性能統計

### ML Enhanced
- **total_trades**: 48.00
- **avg_return_pct**: 0.00
- **win_rate_pct**: 0.00
- **max_return_pct**: 0.00
- **min_return_pct**: 0.00

### CatBoost Enhanced
- **total_combinations**: 9.00
- **avg_annual_return_pct**: 174.94
- **avg_win_rate_pct**: 66.21
- **best_annual_return_pct**: 364.50
- **worst_annual_return_pct**: 44.50


## 關鍵發現

1. **模型架構差異**:
   - ML Enhanced: 9 個獨立模型，各自預測該組合的信號品質
   - CatBoost Enhanced: 全局模型學習最佳 pattern-exit_mode 組合

2. **樣本權重差異**:
   - ML Enhanced: 使用簡單的勝負標籤
   - CatBoost Enhanced: P2 三層權重 (score幅度 + 標籤等級 + 類頻率補償)

3. **特徵差異**:
   - CatBoost Enhanced 包含更多機構流特徵和技術指標

## 後續建議

根據回測結果，請評估:
1. 年化報酬率的差異是否顯著
2. 樣本權重策略 (P2) 是否改善了預測準確率
3. 全局模型是否比獨立模型更能捕捉 pattern-exit_mode 相互作用

## 詳細數據

更多信息見: /Users/sony/ml_stock/stock/catboost_enhanced/results/comparison_data.json

---
Report generated by weekly_retrain.py
